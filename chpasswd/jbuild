(jbuild_version 1)

(library (
  (name doveapp)
  (libraries (calendar cryptokit jingoo netcgi2 sqlite3))
  (wrapped false)
  (modules (
    config time token doveadm
    model database modelDatabase 
    template mails
    view viewWeb viewCgi
    controller 
  ))))

(library (
  (name mocks)
  (libraries (jingoo doveapp))
  (wrapped false)
  (modules (mailMock modelMock viewMock webMock databaseTestTools))))

(executable (
  (name doveadmTest)
  (libraries (doveapp kaputt))
  (modules (doveadmTest))
))
(alias ((name runtest) (action (run ./doveadmTest.exe))))

(executable (
  (name timeTest)
  (libraries (doveapp kaputt))
  (modules (timeTest))))
(alias ((name runtest) (action (run ./timeTest.exe))))

(executable (
  (name modelTest)
  (libraries (doveapp kaputt))
  (modules (modelTest))))
(alias ((name runtest) (action (run ./modelTest.exe))))

(executable (
  (name controllerTest)
  (libraries (doveapp mocks kaputt))
  (modules (controllerTest))))
(alias ((name runtest) (action (run ./controllerTest.exe))))

(executable (
  (name templateTest)
  (libraries (doveapp kaputt))
  (modules (templateTest))))
(alias ((name runtest) (action (run ./templateTest.exe))))

(executable (
  (name viewWebTest)
  (libraries (doveapp kaputt mocks))
  (modules (viewWebTest))))
(alias ((name runtest) (action (run ./viewWebTest.exe))))

(executable (
  (name mailsTest)
  (libraries (doveapp mocks kaputt))
  (modules (mailsTest))))
(alias ((name runtest) (action (run ./mailsTest.exe))))

(executable (
  (name tokenTest)
  (libraries (doveapp kaputt))
  (modules (tokenTest))))
(alias ((name runtest) (action (run ./tokenTest.exe))))

(executable (
  (name databaseTest)
  (libraries (doveapp kaputt mocks))
  (modules (databaseTest))))
(alias ((name runtest) (action (run ./databaseTest.exe))))

(executable (
  (name modelDatabaseTest)
  (libraries (doveapp kaputt mocks))
  (modules (modelDatabaseTest))))
(alias ((name runtest) (action (run ./modelDatabaseTest.exe))))

(executable (
  (name viewCgiTest)
  (libraries (doveapp kaputt))
  (modules (viewCgiTest))))
(alias ((name runtest) (action (run ./viewCgiTest.exe))))

